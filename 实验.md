### normal train
    python3 train.py --data voc.yaml --cfg yolov5s_orig.yaml --weights '' --batch-size 112

### train with stripe prune
    python3 train_FS.py --data coco.yaml --cfg yolov5s.yaml --weights '' --batch-size 112 --sr 0.99 --threshold 0.01 --epochs 300
    python3 train_FS.py --data voc.yaml --cfg yolov5s.yaml --weights '' --batch-size 112 --sr 0.99 --threshold 0.01 --epochs 300

### 公式 Elastic Net penalty  (sr (0, 1))
    python3 train_prune.py --data voc.yaml --cfg yolov5s.yaml --weights '' --sr 0.1 --threshold 0.01 --Elastic_Net True --batch-size 112

### stripe prune 剪枝
    python3 train_prune.py --data coco.yaml --cfg yolov5s.yaml --weights './runs/train/weights/last.pt' --threshold 0.01 --batch-size 96

### test separately
    python3 val.py --data voc.yaml --img 640 --conf 0.25 --iou 0.45 --weights ./runs/train/exp-mobile_1-yolo5s_voc_sr-0.01_threshold-0.01/prune.pt

### hyperparameter evolve
bash evolve.sh

### dynamic alpha 将alpha设为lr
python3 train_FS_Dynamic.py --data voc.yaml --cfg yolov5s.yaml --weights '' --batch-size 112 --sr 0.05 --threshold 0.01 --epochs 300

### 论文画图
## figure1
python3 visualize.py --data coco.yaml --cfg yolov5s_orig.yaml --weights 'yolov5s.pt' --flag figure_01

## figure4
# 需要根据不同模型，更换不同cfg, 比如说加入了fs的model和不加fs的，不仅需要换cfg, 也需要在common.py中把Bottleneck里的Conv 或者 Conv_pt换掉; 
# 并且if k == 'model.5.conv_pt': 中的conv_pt也要换掉;
# 如果是baseline, 则--flag baseline, 否则 --flag FS; 默认是baseline
python3 visualize.py --data coco.yaml --cfg yolov5s_orig.yaml --weights 'yolov5s.pt' --flag baseline          # 改common.py 中bottleneck
python3 visualize.py --data coco.yaml --cfg yolov5s.yaml --weights 'yolov5s.pt' --flag FS                     # 改common.py 中bottleneck

## figure7
python3 visualize.py --data coco.yaml --cfg yolov5s.yaml --weights './runs/stripe_experiment/COCO/exp-COCO_0.99_0.01_01/weights/last.pt' --flag figure_07 --threshold 0.01

#### MobileNet 架构
### normal train
    python3 train.py --data coco.yaml --cfg mobile_1-yolo5s.yaml --weights '' --batch-size 112 

### train with stripe prune
    python3 train_FS.py --data coco.yaml --cfg mobile_1-yolo5s_stripe.yaml --weights '' --Mobilenet True --batch-size 112 --sr 0.99 --threshold 0.01
                                                                                                 --sr 0.01 --threshold 0.01 --epochs 370 

### stripe prune
    python3 train_prune.py --data coco.yaml --cfg mobile_1-yolo5s_stripe.yaml --weights './runs/stripe_experiment/mobilenet/exp-0.99-0.01/weights/last.pt' --Mobilenet True --threshold 0.01 --batch-size 96

### test separately
    python3 val.py --data voc.yaml --img 640 --conf 0.25 --iou 0.45 --weights ./runs/train/exp-mobile_1-yolo5s_voc_sr-0.01_threshold-0.01/prune.pt

### alpha-max 彭老师实验
    废弃 python3 train_FS.py --data coco.yaml --cfg yolov5s.yaml --weights '' --batch-size 112 --sr 0.99 --threshold 0.01 --epochs 300 --alpha_max True
    
    python3 train_FS_alpha_max_02.py --data voc_test.yaml --cfg yolov5s.yaml --weights '' --batch-size 8 --sr 0.05 --threshold 0.01 --epochs 300
    具体说明在runs/alpha_max/guaidence.txt中说明